Либо статикой, либо dhcp-сервером настраиваем адреса локальной сети:
ISP - 192.168.1.1/24
SRV - 192.168.1.10/24
CLI - 192.168.1.20/24
Для статики настраиваем на SRV и CLI:
 echo 192.168.1.10/24 > /etc/net/ifaces/enp0s3/ipv4address и echo 192.168.1.20/24 > /etc/net/ifaces/enp0s3/ipv4address
 echo default via 192.168.1.1 > /etc/net/ifaces/enp0s3/ipv4route
 echo nameserver 192.168.1.1 > /etc/net/ifaces/enp0s3/resolv.conf
 echo nameserver 8.8.8.8 >> /etc/net/ifaces/enp0s3/resolv.conf
Отдельно на SRV:
  echo 192.168.1.10/24 > /etc/net/ifaces/enp0s3/ipv4address
Отдельно на CLI:
 echo 192.168.1.20/24 > /etc/net/ifaces/enp0s3/ipv4address
 systemctl restart network
Для DHCP-сервера скачиваем пакет и настраиваем на ISP:
 apt-get update
 apt-get install -y dhcp-server
В файле /etc/sysconfig/dhcpd
В строку «DHCPARGS=» - вписываем после = ens19
 DHCPDARGS=ens19
Создаём файл конфигруации dhcpd:
 cp dhcpd.conf.sample dhcpd.conf 
В файле должна быть такая конфигурация:
# See dhcpd.conf(5) for further configuration

ddns-update-style none;

subnet 192.168.1.0 netmask 255.255.255.0 {
        option routers                  192.168.1.1;
        option subnet-mask              255.255.255.0;

        option nis-domain               "lot.ro";
        option domain-name              "lot.ro";
        option domain-name-servers      192.168.1.1, 8.8.8.8, 8.8.4.4;

        range 192.168.1.50 192.168.1.100;
        default-lease-time 21600;
        max-lease-time 43200;
}
host cli {
  hardware ethernet bc:24:11:b4:e3:15; #MAC-адрес
  fixed-address 192.168.1.20;
}
host server {
  hardware ethernet bc:24:11:aa:51:52; #MAC-адрес
  fixed-address 192.168.1.10;
}

MAC-адреса смотрите в параметрах сетевого адаптора ens18 на машинах server и cli командой:
 ip -c a (обычно он выделен жёлтым или оранжевым)
После настройки включаем:
 systemctl enable --now dhcpd
Также настраиваем NAT на ISP:
 apt-get install iptables
В файле /etc/net/sysctl.conf 
редактируем строку (вместо 0, пишем 1):
 net.ipv4.ip_forward = 0 
Сохраняем:
 sysctl -p
Создаём правило:
 iptables -t nat -A POSTROUTING -o ens18 -j MASQUERADE
Сохраняем:
 iptables-save -f /etc/sysconfig/iptables 
Включаем:
 systemctl enable --now iptables

На CLI и Server в файле /etc/net/ifaces/ens18/options указываем:
BOOTPROTO=dhcp
TYPE=eth

На всех трёх машинах перезагружаем сеть и обновляем список пакетов:
 systemctl restart network
 apt-get update

Скачиваем необходимые пакеты с bacula и mysql:
На Server:
apt-get install -y bacula15-director-common bacula15-director-mysql bacula15-common bacula15-storage bacula15-console bacula15-client
apt-get install mariadb-server MariaDB
На cli:
apt-get install -y bacula15-storage

После установки можете проверить наличие всех необходимых пакетов командой rpm -qa | grep <название пакета>:
НА SERVER:
[root@server bacula]# rpm -qa | grep mariadb
 mariadb-server-control-10.6.24-alt1.noarch
 mariadb-10.6.24-alt1.x86_64
 libmariadb3-10.6.24-alt1.x86_64
 mariadb-common-10.6.24-alt1.noarch
 mariadb-server-10.6.24-alt1.x86_64
 mariadb-client-10.6.24-alt1.x86_64
[root@server bacula]# rpm -qa | grep bacula
 bacula15-director-common-15.0.2-alt2.x86_64
 bacula15-console-15.0.2-alt2.x86_64
 bacula15-common-15.0.2-alt2.x86_64
 bacula15-director-mysql-15.0.2-alt2.x86_64
 bacula15-storage-15.0.2-alt2.x86_64
 bacula15-15.0.2-alt2.x86_64
 bacula15-client-15.0.2-alt2.x86_64
НА CLI:
cli backup # rpm -qa | grep bacula
 bacula15-common-15.0.2-alt2.x86_64
 bacula15-storage-15.0.2-alt2.x86_64

ДАЛЬШЕ ВСЁ ДЕЛАЕМ НА СЕРВЕРЕ:
[root@server etc]# mysql -u root -p (далее пароль пользователя root - toor)
ALTER USER 'root'@'localhost' IDENTIFIED BY 'root'; - меняем пароль
FLUSH PRIVILEGES;
EXIT;

Создаём базу данных.
Заходим в каталог /usr/share/bacula/scripts. Перед запуском скриптов редактируем их:
mcedit create_mysql_database
12 строка должна быть такой: if $bindir/mysql -u root -p $* -f <<END-OF-DATA

mcedit make_mysql_tables
26 строка должна быть такой: if mysql -u root -p $* -f <<END-OF-DATA

mcedit grant_mysql_privileges
В 11 строке добавляем пароль: db_password="root" # Я добавил пароль, который поставил для пользователя root для входа в базу данных
20 строка: if $bindir/mysql $* -u root -p -f 2>/dev/null 1>/dev/null  <<EOD
30 строка: if $bindir/mysql $* -u root -p -f <<END-OF-DATA

Далее запускаем скрипты (пароль тот же, что вписали здесь - ALTER USER 'root'@'localhost' IDENTIFIED BY 'root'):
./create_mysql_database
./make_mysql_tables
./grant_mysql_privileges


# Director
Director {
  Name = "srv-dir"
  DIRport = 9101
  QueryFile = "/etc/bacula/query.sql"
  WorkingDirectory = "/var/lib/bacula"
  PidDirectory = "/var/run/bacula"
  Maximum Concurrent Jobs = 20
  Password = "root"
  TLS Enable = no 
  TLS Require = no
}

# Каталог MySQL
Catalog {
  Name = MyCatalog
  dbname = "bacula"
  dbuser = "root"
  dbpassword = "root"
  dbaddress = "localhost"  #
  dbport = "3306"
}

# Messages
Messages {
  Name = Standard
  director = srv-dir = all
}

# Pool для /etc
Pool {
  Name = EtcPool
  Pool Type = Backup
  Recycle = no
  AutoPrune = no
  Volume Retention = 30 days
  Maximum Volume Bytes = 500M
  Maximum Volumes = 100
  Label Format = "etc-backup-"
}

# Pool для MySQL
Pool {
  Name = MysqlPool
  Pool Type = Backup
  Recycle = no
  AutoPrune = no
  Volume Retention = 60 days
  Maximum Volume Bytes = 1G
  Maximum Volumes = 50
  Label Format = "mysql-backup-"
}

# Storage — cli
Storage {
  Name = cli-sd
  Address = 192.168.1.20
  SDPort = 9103
  Password = "root"
  Device = cli-sd
  Media Type = File
  TLS Enable = no
}

# Client 
Client {
  Name = srv-fd
  Address = 192.168.1.10
  FDPort = 9102
  Password = "root"
  Catalog = MyCatalog
  TLS Enable = no
  TLS PSK Enable = no
  TLS Require = no
  TLS Authenticate = no
}

# FileSet для /etc
FileSet {
  Name = "EtcFileSet"
  Include {
    Options {
      signature = MD5
      compression = GZIP
    }
    File = /etc
  }
}

# FileSet для MySQL
FileSet {
  Name = "MysqlFileSet"
  Include {
    Options {
      signature = MD5
    }
    File = /var/backups/mysql
  }
}

# Schedule
Schedule {
  Name = "DailyCycle"
  Run = Full daily at 02:00
}

# JobDefs — базовые параметры (исправлен Bootstrap)
JobDefs {
  Name = "DefaultJob"
  Type = Backup
  Level = Full
  Client = srv-fd
  Schedule = "DailyCycle"
  Storage = cli-sd
  Messages = Standard
  Priority = 10
  Write Bootstrap = "/var/lib/bacula/%n.bsr"  # 
}

# Job для /etc
Job {
  Name = "Backup-Etc"
  JobDefs = "DefaultJob"
  Type = Backup
  Level = Full
  Client = srv-fd
  FileSet = "EtcFileSet"
  Schedule = "DailyCycle"
  Storage = cli-sd
  Pool = EtcPool
  Messages = Standard
  Write Bootstrap = "/var/lib/bacula/etc.bsr"
}

# Job для MySQL
Job {
  Name = "Backup-MySQL"
  JobDefs = "DefaultJob"
  Type = Backup
  Level = Full
  Client = srv-fd
  FileSet = "MysqlFileSet"
  Schedule = "DailyCycle"
  Storage = cli-sd
  Pool = MysqlPool
  Messages = Standard
  Write Bootstrap = "/var/lib/bacula/mysql.bsr"
  RunBeforeJob = "/usr/local/bin/backup-mysql.sh"
}

# Restore Job (исправлено — убрана циклическая ссылка)
Job {
  Name = "RestoreFiles"
  Type = Restore
  Client = srv-fd
  FileSet = "RestoreFileSet"
  Storage = cli-sd
  Pool = MysqlPool
  Messages = Standard
  Where = /tmp/bacula-restores
  RunBeforeJob = "/bin/rm -rf /tmp/bacula-restores/*"
  Write Bootstrap = "/var/lib/bacula/restore.bsr"
}

# FileSet для восстановления
FileSet {
  Name = "RestoreFileSet"
  Include {
    Options {
      signature = MD5
    }
    File = /
  }
}
